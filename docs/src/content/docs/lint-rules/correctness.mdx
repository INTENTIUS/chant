---
title: Correctness Rules
description: Rules that catch structural errors causing evaluation or deployment failures
---

Correctness rules catch structural errors that would cause evaluation or deployment failures.

---

## COR003: String-Based Reference

Use typed property access instead of string-based `GetAtt()` or `Ref()` calls. String references bypass type checking and break if a resource is renamed.

**Severity:** warning

```typescript
// ❌ Triggers COR003
export const fn = new _.Function({
  role: GetAtt("functionRole", "Arn"),
  bucket: Ref("dataBucket"),
});
```

```typescript
// ✅ Fixed — use typed AttrRef properties
import { functionRole } from "./role";
import { dataBucket } from "./storage";

export const fn = new _.Function({
  role: functionRole.arn,
  bucket: dataBucket.ref,
});
```

---

## COR004: Unused Declarable

Exported declarables that are never referenced by another resource in the same file may be dead infrastructure code.

**Severity:** warning

```typescript
// ❌ Triggers COR004
export const logsBucket = new _.Bucket({
  bucketName: "logs",
});

export const dataBucket = new _.Bucket({
  bucketName: "data",
});
// logsBucket is never used — flagged
```

```typescript
// ✅ Fixed — reference it or remove it
export const logsBucket = new _.Bucket({
  bucketName: "logs",
});

export const dataBucket = new _.Bucket({
  bucketName: "data",
  loggingConfiguration: { destinationBucketName: logsBucket.ref },
});
```

:::note
Resources that are imported and referenced from other files are tracked through the module graph. If a resource is only used via cross-file imports, it may still appear as referenced.
:::

---

## COR008: Export Required

All declarable instances must be exported so chant can discover them during synthesis. Non-exported resources are invisible to the build pipeline.

**Severity:** error

```typescript
// ❌ Triggers COR008
const bucket = new _.Bucket({
  bucketName: "my-data",
});
```

```typescript
// ✅ Fixed
export const bucket = new _.Bucket({
  bucketName: "my-data",
});
```

---

