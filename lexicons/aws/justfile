# Default recipe - list all available commands
default:
    @just --list

# Generate types and metadata from CloudFormation schemas
generate:
    bun run src/codegen/generate-cli.ts

# Validate generated artifacts
validate:
    bun run src/validate-cli.ts

# Generate docs site, install deps, and start dev server
docs:
    DOCS_BASE_PATH=/ bun run src/codegen/docs-cli.ts
    bun install --cwd docs
    bun --cwd docs dev --port 4322

# Build docs site for production
docs-build:
    DOCS_BASE_PATH=/ bun run src/codegen/docs-cli.ts
    bun install --cwd docs
    bun --cwd docs build

# Run CloudFormation samples roundtrip import test
import-samples *args:
    bash scripts/import-aws-samples.sh {{args}}

# Package the lexicon (generate + validate)
package: generate validate
